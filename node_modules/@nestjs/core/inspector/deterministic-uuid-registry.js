"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DeterministicUuidRegistry = void 0;
const xxhash_1 = require("@node-rs/xxhash");
const DEFAULT_UUID_NAMESPACE = 'efa0df42-88af-474f-9cad-4206a2319f07';
class DeterministicUuidRegistry {
    static get(str, namespace = DEFAULT_UUID_NAMESPACE, inc = 0) {
        const id = inc
            ? (0, xxhash_1.xxh32)(`${namespace}_${str}_${inc}`)
            : (0, xxhash_1.xxh32)(`${namespace}_${str}`);
        const idAsString = `${id}`;
        if (this.registry.has(idAsString)) {
            return this.get(str, namespace, inc + 1);
        }
        this.registry.add(idAsString);
        return idAsString;
    }
    static clear() {
        this.registry.clear();
    }
}
exports.DeterministicUuidRegistry = DeterministicUuidRegistry;
DeterministicUuidRegistry.registry = new Set();
